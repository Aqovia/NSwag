version: '{build}'
branches:
  except:
  - release
image: Visual Studio 2017 Preview
configuration: Release
platform: Any CPU
before_build:
- cmd: >-
    npm --prefix "src\NSwag.Integration.TypeScriptWeb" install "src\NSwag.Integration.TypeScriptWeb"
    nuget restore src\NSwag.sln -NoCache
    dotnet restore src\NSwag.sln --no-cache
build:
  project: src\NSwag.sln
  verbosity: minimal
after_build:
- cmd: >-
    nuget pack src/NSwag.MSBuild/NSwag.MSBuild.nuspec
    nuget pack src/NSwagStudio.Chocolatey/NSwagStudio.nuspec
test:
  categories:
    except:
    - integration
artifacts:
- path: '*.nupkg'
- path: src\NSwagStudio.Installer\bin\Release\NSwagStudio.msi
  name: NSwagStudio.msi
- path: src\NSwagStudio\bin\Release
  name: NSwag
- path: src\NSwagStudio\Properties\AssemblyInfo.cs
- path: src/NSwag**/*.nupkg
  